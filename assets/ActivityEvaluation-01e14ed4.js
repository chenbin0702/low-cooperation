import{_ as se,r as _,a as M,o as ie,c as i,n as ue,d as T,e as j,f as l,w as t,E as k,i as n,g as c,q as re,h as de,t as d,F as pe,p as me,l as ce}from"./index-bbf05c48.js";const fe={class:"activity-evaluation"},ve={class:"card-header"},ge={class:"pagination"},_e={class:"dialog-footer"},be={class:"detail-section"},ye={class:"detail-section"},Ve={__name:"ActivityEvaluation",setup(Ce){const C=_(!1),U=_(!1),w=_(!1),E=_(!1),N=_("add"),S=_(null),u=_({}),p=M({name:"",type:"",status:"",dateRange:[]}),v=M({currentPage:1,pageSize:10,total:0}),o=M({activityName:"",metrics:[],participantCount:0,conversionCount:0,cost:0,revenue:0,satisfaction:0,conclusion:"",suggestions:""}),L=[{label:"示例活动1",value:"activity1"},{label:"示例活动2",value:"activity2"}],P=_([]),I={activityName:[{required:!0,message:"请选择活动",trigger:"change"}],metrics:[{required:!0,message:"请选择评估指标",trigger:"change"}],conclusion:[{required:!0,message:"请输入评估结论",trigger:"blur"}]},G=s=>({pending:"info",processing:"warning",completed:"success"})[s]||"",H=s=>({pending:"待评估",processing:"评估中",completed:"已完成"})[s]||s,B=()=>{y()},J=()=>{Object.keys(p).forEach(s=>{p[s]=""}),p.dateRange=[],B()},K=s=>{v.pageSize=s,y()},Q=s=>{v.currentPage=s,y()},R=(s="add",e=null)=>{N.value=s,w.value=!0,s==="edit"&&e?Object.assign(o,e):Object.keys(o).forEach(f=>{Array.isArray(o[f])?o[f]=[]:typeof o[f]=="number"?o[f]=0:o[f]=""})},W=s=>{R("edit",s)},X=s=>{u.value=s,E.value=!0},Z=s=>{ce.confirm("确定要删除该评估记录吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{C.value=!0;try{await new Promise(e=>setTimeout(e,1e3)),k.success("删除成功"),y()}catch{k.error("删除失败")}finally{C.value=!1}})},h=async()=>{if(S.value)try{await S.value.validate(),U.value=!0,await new Promise(s=>setTimeout(s,1e3)),k.success(N.value==="add"?"添加成功":"更新成功"),w.value=!1,y()}catch{k.error("表单验证失败，请检查必填项")}finally{U.value=!1}},y=async()=>{C.value=!0;try{await new Promise(s=>setTimeout(s,1e3)),P.value=[{activityName:"示例活动1",type:"online",startDate:"2024-01-15",endDate:"2024-01-20",status:"completed",participantCount:1e3,conversionCount:100,cost:5e4,revenue:15e4,roi:200,satisfaction:4.5,conclusion:"活动效果良好，达到预期目标",suggestions:"建议进一步扩大活动规模"},{activityName:"示例活动2",type:"offline",startDate:"2024-01-10",endDate:"2024-01-12",status:"processing",participantCount:500,conversionCount:50,cost:3e4,revenue:8e4,roi:167,satisfaction:4,conclusion:"活动进行中，初步效果符合预期",suggestions:"需要加强现场互动环节"}],v.total=20}catch{k.error("加载数据失败")}finally{C.value=!1}};return ie(()=>{y()}),(s,e)=>{const f=i("el-input"),r=i("el-form-item"),V=i("el-option"),z=i("el-select"),ee=i("el-date-picker"),g=i("el-button"),A=i("el-form"),q=i("el-card"),b=i("el-table-column"),F=i("el-tag"),le=i("el-table"),te=i("el-pagination"),x=i("el-checkbox"),ae=i("el-checkbox-group"),D=i("el-input-number"),O=i("el-rate"),Y=i("el-dialog"),m=i("el-descriptions-item"),oe=i("el-descriptions"),ne=ue("loading");return T(),j("div",fe,[l(q,{class:"filter-card"},{default:t(()=>[l(A,{inline:!0,model:p,class:"search-form"},{default:t(()=>[l(r,{label:"活动名称"},{default:t(()=>[l(f,{modelValue:p.name,"onUpdate:modelValue":e[0]||(e[0]=a=>p.name=a),placeholder:"请输入活动名称",clearable:""},null,8,["modelValue"])]),_:1}),l(r,{label:"活动类型"},{default:t(()=>[l(z,{modelValue:p.type,"onUpdate:modelValue":e[1]||(e[1]=a=>p.type=a),placeholder:"请选择",clearable:""},{default:t(()=>[l(V,{label:"线上活动",value:"online"}),l(V,{label:"线下活动",value:"offline"})]),_:1},8,["modelValue"])]),_:1}),l(r,{label:"评估状态"},{default:t(()=>[l(z,{modelValue:p.status,"onUpdate:modelValue":e[2]||(e[2]=a=>p.status=a),placeholder:"请选择",clearable:""},{default:t(()=>[l(V,{label:"待评估",value:"pending"}),l(V,{label:"评估中",value:"processing"}),l(V,{label:"已完成",value:"completed"})]),_:1},8,["modelValue"])]),_:1}),l(r,{label:"活动时间"},{default:t(()=>[l(ee,{modelValue:p.dateRange,"onUpdate:modelValue":e[3]||(e[3]=a=>p.dateRange=a),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),l(r,null,{default:t(()=>[l(g,{type:"primary",onClick:B},{default:t(()=>e[19]||(e[19]=[n("搜索")])),_:1}),l(g,{onClick:J},{default:t(()=>e[20]||(e[20]=[n("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(q,{class:"list-card"},{header:t(()=>[c("div",ve,[e[22]||(e[22]=c("h2",null,"活动评估列表",-1)),l(g,{type:"primary",onClick:R},{default:t(()=>e[21]||(e[21]=[n("新增评估")])),_:1})])]),default:t(()=>[re((T(),de(le,{data:P.value,style:{width:"100%"}},{default:t(()=>[l(b,{prop:"activityName",label:"活动名称","min-width":"180","show-overflow-tooltip":""}),l(b,{prop:"type",label:"活动类型",width:"120"},{default:t(({row:a})=>[l(F,null,{default:t(()=>[n(d(a.type==="online"?"线上活动":"线下活动"),1)]),_:2},1024)]),_:1}),l(b,{prop:"startDate",label:"开始时间",width:"180",sortable:""}),l(b,{prop:"endDate",label:"结束时间",width:"180",sortable:""}),l(b,{prop:"status",label:"评估状态",width:"120"},{default:t(({row:a})=>[l(F,{type:G(a.status)},{default:t(()=>[n(d(H(a.status)),1)]),_:2},1032,["type"])]),_:1}),l(b,{prop:"roi",label:"投资回报率",width:"120"},{default:t(({row:a})=>[n(d(a.roi)+"% ",1)]),_:1}),l(b,{label:"操作",width:"200",fixed:"right"},{default:t(({row:a})=>[l(g,{link:"",type:"primary",onClick:$=>X(a)},{default:t(()=>e[23]||(e[23]=[n("详情")])),_:2},1032,["onClick"]),l(g,{link:"",type:"primary",onClick:$=>W(a)},{default:t(()=>e[24]||(e[24]=[n("编辑")])),_:2},1032,["onClick"]),l(g,{link:"",type:"danger",onClick:$=>Z(a)},{default:t(()=>e[25]||(e[25]=[n("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[ne,C.value]]),c("div",ge,[l(te,{"current-page":v.currentPage,"onUpdate:currentPage":e[4]||(e[4]=a=>v.currentPage=a),"page-size":v.pageSize,"onUpdate:pageSize":e[5]||(e[5]=a=>v.pageSize=a),"page-sizes":[10,20,50,100],total:v.total,layout:"total, sizes, prev, pager, next",onSizeChange:K,onCurrentChange:Q},null,8,["current-page","page-size","total"])])]),_:1}),l(Y,{modelValue:w.value,"onUpdate:modelValue":e[16]||(e[16]=a=>w.value=a),title:N.value==="add"?"新增评估":"编辑评估",width:"60%","destroy-on-close":""},{footer:t(()=>[c("span",_e,[l(g,{onClick:e[15]||(e[15]=a=>w.value=!1)},{default:t(()=>e[32]||(e[32]=[n("取消")])),_:1}),l(g,{type:"primary",onClick:h,loading:U.value},{default:t(()=>e[33]||(e[33]=[n(" 确定 ")])),_:1},8,["loading"])])]),default:t(()=>[l(A,{ref_key:"formRef",ref:S,model:o,rules:I,"label-width":"100px"},{default:t(()=>[l(r,{label:"活动名称",prop:"activityName"},{default:t(()=>[l(z,{modelValue:o.activityName,"onUpdate:modelValue":e[6]||(e[6]=a=>o.activityName=a),filterable:"",placeholder:"请选择活动",style:{width:"100%"}},{default:t(()=>[(T(),j(pe,null,me(L,a=>l(V,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(r,{label:"评估指标",prop:"metrics"},{default:t(()=>[l(ae,{modelValue:o.metrics,"onUpdate:modelValue":e[7]||(e[7]=a=>o.metrics=a)},{default:t(()=>[l(x,{label:"participation"},{default:t(()=>e[26]||(e[26]=[n("参与度")])),_:1}),l(x,{label:"conversion"},{default:t(()=>e[27]||(e[27]=[n("转化率")])),_:1}),l(x,{label:"satisfaction"},{default:t(()=>e[28]||(e[28]=[n("满意度")])),_:1}),l(x,{label:"roi"},{default:t(()=>e[29]||(e[29]=[n("投资回报")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(r,{label:"参与人数",prop:"participantCount"},{default:t(()=>[l(D,{modelValue:o.participantCount,"onUpdate:modelValue":e[8]||(e[8]=a=>o.participantCount=a),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(r,{label:"转化人数",prop:"conversionCount"},{default:t(()=>[l(D,{modelValue:o.conversionCount,"onUpdate:modelValue":e[9]||(e[9]=a=>o.conversionCount=a),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(r,{label:"活动成本",prop:"cost"},{default:t(()=>[l(D,{modelValue:o.cost,"onUpdate:modelValue":e[10]||(e[10]=a=>o.cost=a),min:0,precision:2,style:{width:"100%"}},{append:t(()=>e[30]||(e[30]=[n("元")])),_:1},8,["modelValue"])]),_:1}),l(r,{label:"活动收益",prop:"revenue"},{default:t(()=>[l(D,{modelValue:o.revenue,"onUpdate:modelValue":e[11]||(e[11]=a=>o.revenue=a),min:0,precision:2,style:{width:"100%"}},{append:t(()=>e[31]||(e[31]=[n("元")])),_:1},8,["modelValue"])]),_:1}),l(r,{label:"满意度评分",prop:"satisfaction"},{default:t(()=>[l(O,{modelValue:o.satisfaction,"onUpdate:modelValue":e[12]||(e[12]=a=>o.satisfaction=a),max:5},null,8,["modelValue"])]),_:1}),l(r,{label:"评估结论",prop:"conclusion"},{default:t(()=>[l(f,{modelValue:o.conclusion,"onUpdate:modelValue":e[13]||(e[13]=a=>o.conclusion=a),type:"textarea",rows:4,placeholder:"请输入评估结论"},null,8,["modelValue"])]),_:1}),l(r,{label:"改进建议",prop:"suggestions"},{default:t(()=>[l(f,{modelValue:o.suggestions,"onUpdate:modelValue":e[14]||(e[14]=a=>o.suggestions=a),type:"textarea",rows:4,placeholder:"请输入改进建议"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(Y,{modelValue:E.value,"onUpdate:modelValue":e[18]||(e[18]=a=>E.value=a),title:"评估详情",width:"50%"},{default:t(()=>[l(oe,{column:2,border:""},{default:t(()=>[l(m,{label:"活动名称"},{default:t(()=>[n(d(u.value.activityName),1)]),_:1}),l(m,{label:"活动类型"},{default:t(()=>[n(d(u.value.type==="online"?"线上活动":"线下活动"),1)]),_:1}),l(m,{label:"开始时间"},{default:t(()=>[n(d(u.value.startDate),1)]),_:1}),l(m,{label:"结束时间"},{default:t(()=>[n(d(u.value.endDate),1)]),_:1}),l(m,{label:"参与人数"},{default:t(()=>[n(d(u.value.participantCount),1)]),_:1}),l(m,{label:"转化人数"},{default:t(()=>[n(d(u.value.conversionCount),1)]),_:1}),l(m,{label:"活动成本"},{default:t(()=>[n("¥"+d(u.value.cost),1)]),_:1}),l(m,{label:"活动收益"},{default:t(()=>[n("¥"+d(u.value.revenue),1)]),_:1}),l(m,{label:"投资回报率"},{default:t(()=>[n(d(u.value.roi)+"%",1)]),_:1}),l(m,{label:"满意度评分"},{default:t(()=>[l(O,{modelValue:u.value.satisfaction,"onUpdate:modelValue":e[17]||(e[17]=a=>u.value.satisfaction=a),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),c("div",be,[e[34]||(e[34]=c("h4",null,"评估结论",-1)),c("p",null,d(u.value.conclusion),1)]),c("div",ye,[e[35]||(e[35]=c("h4",null,"改进建议",-1)),c("p",null,d(u.value.suggestions),1)])]),_:1},8,["modelValue"])])}}},ke=se(Ve,[["__scopeId","data-v-1751e538"]]);export{ke as default};
