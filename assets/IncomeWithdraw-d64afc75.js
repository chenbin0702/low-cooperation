import{_ as ae,r as _,a as I,o as le,c as n,n as oe,d as b,e as M,f as t,w as a,E as y,g as s,t as i,i as r,q as ne,h as z,j as U,F as se,p as ie,l as re}from"./index-bbf05c48.js";const ue={class:"income-withdraw"},de={class:"account-item"},pe={class:"value"},me={class:"account-item"},ce={class:"value"},_e={class:"account-item"},ge={class:"value"},fe={class:"pagination"},we={class:"bank-option"},ve={class:"bank-number"},be={class:"dialog-footer"},ye={__name:"IncomeWithdraw",setup(he){const g=_(!1),k=_(!1),f=_(!1),V=_(!1),x=_(null),u=_({}),h=I({availableAmount:8280,withdrawingAmount:5e3,totalWithdrawn:28630}),p=I({currentPage:1,pageSize:10,total:0}),d=I({amount:100,bankId:"",password:""}),A={amount:[{required:!0,message:"请输入提现金额",trigger:"blur"},{type:"number",min:100,message:"最小提现金额为100元",trigger:"blur"},{type:"number",max:5e4,message:"单次最大提现金额为50000元",trigger:"blur"}],bankId:[{required:!0,message:"请选择收款账户",trigger:"change"}],password:[{required:!0,message:"请输入支付密码",trigger:"blur"},{min:6,max:20,message:"密码长度在6-20位之间",trigger:"blur"}]},F=[{id:1,name:"工商银行",number:"**** **** **** 1234"},{id:2,name:"建设银行",number:"**** **** **** 5678"}],S=_([]),W=o=>({processing:"warning",success:"success",failed:"danger",cancelled:"info"})[o]||"info",D=o=>({processing:"处理中",success:"提现成功",failed:"提现失败",cancelled:"已取消"})[o]||o,q=o=>{p.pageSize=o,w()},E=o=>{p.currentPage=o,w()},L=()=>{d.amount=100,d.bankId="",d.password="",f.value=!0},R=async()=>{if(x.value)try{await x.value.validate(),k.value=!0,await new Promise(o=>setTimeout(o,1e3)),y.success("提现申请提交成功"),f.value=!1,w()}catch{y.error("表单验证失败，请检查填写内容")}finally{k.value=!1}},$=o=>{re.confirm("确定要取消该笔提现吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{g.value=!0;try{await new Promise(e=>setTimeout(e,1e3)),y.success("提现已取消"),w()}catch{y.error("操作失败")}finally{g.value=!1}})},j=o=>{u.value=o,V.value=!0},w=async()=>{g.value=!0;try{await new Promise(o=>setTimeout(o,1e3)),S.value=[{withdrawNo:"W202401150001",amount:5e3,bankInfo:"工商银行 **** **** **** 1234",status:"processing",applyTime:"2024-01-15 14:30:00",completeTime:"-"},{withdrawNo:"W202401140001",amount:3e3,bankInfo:"建设银行 **** **** **** 5678",status:"success",applyTime:"2024-01-14 10:00:00",completeTime:"2024-01-14 11:00:00"}],p.total=20}catch{y.error("加载数据失败")}finally{g.value=!1}};return le(()=>{w()}),(o,e)=>{const v=n("el-button"),C=n("el-col"),G=n("el-row"),N=n("el-card"),m=n("el-table-column"),P=n("el-tag"),H=n("el-table"),J=n("el-pagination"),K=n("el-input-number"),T=n("el-form-item"),O=n("el-option"),Q=n("el-select"),X=n("el-input"),Y=n("el-form"),B=n("el-dialog"),c=n("el-descriptions-item"),Z=n("el-descriptions"),ee=oe("loading");return b(),M("div",ue,[t(N,{class:"account-card"},{default:a(()=>[t(G,{gutter:20},{default:a(()=>[t(C,{span:8},{default:a(()=>[s("div",de,[e[9]||(e[9]=s("div",{class:"label"},"可提现金额",-1)),s("div",pe,"¥"+i(h.availableAmount),1),t(v,{type:"primary",onClick:L},{default:a(()=>e[8]||(e[8]=[r("申请提现")])),_:1})])]),_:1}),t(C,{span:8},{default:a(()=>[s("div",me,[e[10]||(e[10]=s("div",{class:"label"},"提现中金额",-1)),s("div",ce,"¥"+i(h.withdrawingAmount),1)])]),_:1}),t(C,{span:8},{default:a(()=>[s("div",_e,[e[11]||(e[11]=s("div",{class:"label"},"累计提现金额",-1)),s("div",ge,"¥"+i(h.totalWithdrawn),1)])]),_:1})]),_:1})]),_:1}),t(N,{class:"list-card"},{header:a(()=>e[12]||(e[12]=[s("div",{class:"card-header"},[s("h2",null,"提现记录")],-1)])),default:a(()=>[ne((b(),z(H,{data:S.value,style:{width:"100%"}},{default:a(()=>[t(m,{prop:"withdrawNo",label:"提现单号",width:"180"}),t(m,{prop:"amount",label:"提现金额",width:"150"},{default:a(({row:l})=>[r(" ¥"+i(l.amount),1)]),_:1}),t(m,{prop:"bankInfo",label:"收款账户","min-width":"200","show-overflow-tooltip":""}),t(m,{prop:"status",label:"状态",width:"120"},{default:a(({row:l})=>[t(P,{type:W(l.status)},{default:a(()=>[r(i(D(l.status)),1)]),_:2},1032,["type"])]),_:1}),t(m,{prop:"applyTime",label:"申请时间",width:"180",sortable:""}),t(m,{prop:"completeTime",label:"完成时间",width:"180"}),t(m,{label:"操作",width:"120",fixed:"right"},{default:a(({row:l})=>[l.status==="processing"?(b(),z(v,{key:0,link:"",type:"danger",onClick:te=>$(l)},{default:a(()=>e[13]||(e[13]=[r(" 取消 ")])),_:2},1032,["onClick"])):U("",!0),t(v,{link:"",type:"primary",onClick:te=>j(l)},{default:a(()=>e[14]||(e[14]=[r(" 详情 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[ee,g.value]]),s("div",fe,[t(J,{"current-page":p.currentPage,"onUpdate:currentPage":e[0]||(e[0]=l=>p.currentPage=l),"page-size":p.pageSize,"onUpdate:pageSize":e[1]||(e[1]=l=>p.pageSize=l),"page-sizes":[10,20,50,100],total:p.total,layout:"total, sizes, prev, pager, next",onSizeChange:q,onCurrentChange:E},null,8,["current-page","page-size","total"])])]),_:1}),t(B,{modelValue:f.value,"onUpdate:modelValue":e[6]||(e[6]=l=>f.value=l),title:"申请提现",width:"500px"},{footer:a(()=>[s("span",be,[t(v,{onClick:e[5]||(e[5]=l=>f.value=!1)},{default:a(()=>e[16]||(e[16]=[r("取消")])),_:1}),t(v,{type:"primary",onClick:R,loading:k.value},{default:a(()=>e[17]||(e[17]=[r(" 确认提现 ")])),_:1},8,["loading"])])]),default:a(()=>[t(Y,{ref_key:"withdrawFormRef",ref:x,model:d,rules:A,"label-width":"100px"},{default:a(()=>[t(T,{label:"提现金额",prop:"amount"},{default:a(()=>[t(K,{modelValue:d.amount,"onUpdate:modelValue":e[2]||(e[2]=l=>d.amount=l),min:100,max:h.availableAmount,precision:2,style:{width:"100%"}},null,8,["modelValue","max"]),e[15]||(e[15]=s("div",{class:"form-tip"}," 最小提现金额：¥100.00，单次最大提现金额：¥50,000.00 ",-1))]),_:1}),t(T,{label:"收款账户",prop:"bankId"},{default:a(()=>[t(Q,{modelValue:d.bankId,"onUpdate:modelValue":e[3]||(e[3]=l=>d.bankId=l),style:{width:"100%"}},{default:a(()=>[(b(),M(se,null,ie(F,l=>t(O,{key:l.id,label:l.name,value:l.id},{default:a(()=>[s("div",we,[s("span",null,i(l.name),1),s("span",ve,i(l.number),1)])]),_:2},1032,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(T,{label:"支付密码",prop:"password"},{default:a(()=>[t(X,{modelValue:d.password,"onUpdate:modelValue":e[4]||(e[4]=l=>d.password=l),type:"password","show-password":"",placeholder:"请输入支付密码"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(B,{modelValue:V.value,"onUpdate:modelValue":e[7]||(e[7]=l=>V.value=l),title:"提现详情",width:"500px"},{default:a(()=>[t(Z,{column:1,border:""},{default:a(()=>[t(c,{label:"提现单号"},{default:a(()=>[r(i(u.value.withdrawNo),1)]),_:1}),t(c,{label:"提现金额"},{default:a(()=>[r(" ¥"+i(u.value.amount),1)]),_:1}),t(c,{label:"收款账户"},{default:a(()=>[r(i(u.value.bankInfo),1)]),_:1}),t(c,{label:"申请时间"},{default:a(()=>[r(i(u.value.applyTime),1)]),_:1}),t(c,{label:"完成时间"},{default:a(()=>[r(i(u.value.completeTime||"-"),1)]),_:1}),t(c,{label:"状态"},{default:a(()=>[t(P,{type:W(u.value.status)},{default:a(()=>[r(i(D(u.value.status)),1)]),_:1},8,["type"])]),_:1}),u.value.remark?(b(),z(c,{key:0,label:"备注"},{default:a(()=>[r(i(u.value.remark),1)]),_:1})):U("",!0)]),_:1})]),_:1},8,["modelValue"])])}}},Ve=ae(ye,[["__scopeId","data-v-dee75c36"]]);export{Ve as default};
