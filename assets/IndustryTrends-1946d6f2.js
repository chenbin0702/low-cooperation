import{_ as ee,r as _,a as q,o as le,c as s,n as te,d as T,e as U,f as l,w as a,E as C,i as d,g as u,q as ae,h as oe,t as f,F as ne,p as se,j as ue,l as ie}from"./index-bbf05c48.js";const de={class:"industry-trends"},re={class:"card-header"},me={class:"pagination"},pe={class:"dialog-footer"},fe={class:"detail-section"},ge={class:"detail-section"},ce={key:0,class:"detail-section"},_e={class:"links-list"},ve=["href"],be={class:"detail-section"},Ve={__name:"IndustryTrends",setup(ye){const w=_(!1),h=_(!1),k=_(!1),z=_(!1),D=_("add"),S=_(null),r=_({}),p=q({keyword:"",field:"",dateRange:[]}),g=q({currentPage:1,pageSize:10,total:0}),o=q({title:"",field:"",source:"",publishTime:"",impact:1,summary:"",content:"",links:"",suggestions:""}),B=_([]),Y={title:[{required:!0,message:"请输入标题",trigger:"blur"}],field:[{required:!0,message:"请选择行业领域",trigger:"change"}],source:[{required:!0,message:"请输入来源",trigger:"blur"}],publishTime:[{required:!0,message:"请选择发布时间",trigger:"change"}],summary:[{required:!0,message:"请输入内容摘要",trigger:"blur"}],content:[{required:!0,message:"请输入详细内容",trigger:"blur"}]},E=()=>{v()},O=()=>{Object.keys(p).forEach(n=>{p[n]=""}),p.dateRange=[],E()},L=n=>{g.pageSize=n,v()},A=n=>{g.currentPage=n,v()},R=(n,e=null)=>{D.value=n,k.value=!0,n==="edit"&&e?Object.assign(o,e):Object.keys(o).forEach(m=>{m==="impact"?o[m]=1:o[m]=""})},G=n=>{R("edit",n)},H=n=>{r.value=n,z.value=!0},J=n=>{ie.confirm("确定要删除该动态吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{w.value=!0;try{await new Promise(e=>setTimeout(e,1e3)),C.success("删除成功"),v()}catch{C.error("删除失败")}finally{w.value=!1}})},K=async()=>{if(S.value)try{await S.value.validate(),h.value=!0,await new Promise(n=>setTimeout(n,1e3)),C.success(D.value==="add"?"添加成功":"更新成功"),k.value=!1,v()}catch{C.error("表单验证失败，请检查必填项")}finally{h.value=!1}},v=async()=>{w.value=!0;try{await new Promise(n=>setTimeout(n,1e3)),B.value=[{title:"新型无人机技术突破",field:"技术创新",source:"航空科技报",publishTime:"2024-01-15 14:30:00",impact:3,summary:"某公司在无人机续航能力方面取得重大突破",content:"详细介绍技术突破的具体内容...",links:`https://example.com/news1
https://example.com/news2`,suggestions:"建议关注该技术发展，评估采用可能性"},{title:"行业政策更新",field:"航空服务",source:"民航局",publishTime:"2024-01-14 10:00:00",impact:2,summary:"新的无人机管理政策出台",content:"政策详细内容...",links:"https://example.com/policy",suggestions:"需要及时调整业务以符合新政策要求"}],g.total=20}catch{C.error("加载数据失败")}finally{w.value=!1}};return le(()=>{v()}),(n,e)=>{const m=s("el-input"),i=s("el-form-item"),b=s("el-option"),M=s("el-select"),$=s("el-date-picker"),c=s("el-button"),j=s("el-form"),F=s("el-card"),V=s("el-table-column"),I=s("el-tag"),P=s("el-rate"),Q=s("el-table"),W=s("el-pagination"),N=s("el-dialog"),x=s("el-descriptions-item"),X=s("el-descriptions"),Z=te("loading");return T(),U("div",de,[l(F,{class:"filter-card"},{default:a(()=>[l(j,{inline:!0,model:p,class:"search-form"},{default:a(()=>[l(i,{label:"关键词"},{default:a(()=>[l(m,{modelValue:p.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>p.keyword=t),placeholder:"请输入关键词",clearable:""},null,8,["modelValue"])]),_:1}),l(i,{label:"行业领域"},{default:a(()=>[l(M,{modelValue:p.field,"onUpdate:modelValue":e[1]||(e[1]=t=>p.field=t),placeholder:"请选择",clearable:""},{default:a(()=>[l(b,{label:"无人机制造",value:"manufacture"}),l(b,{label:"航空服务",value:"service"}),l(b,{label:"技术创新",value:"innovation"})]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"发布时间"},{default:a(()=>[l($,{modelValue:p.dateRange,"onUpdate:modelValue":e[2]||(e[2]=t=>p.dateRange=t),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),l(i,null,{default:a(()=>[l(c,{type:"primary",onClick:E},{default:a(()=>e[19]||(e[19]=[d("搜索")])),_:1}),l(c,{onClick:O},{default:a(()=>e[20]||(e[20]=[d("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(F,{class:"list-card"},{header:a(()=>[u("div",re,[e[22]||(e[22]=u("h2",null,"行业动态",-1)),l(c,{type:"primary",onClick:e[3]||(e[3]=t=>R("add"))},{default:a(()=>e[21]||(e[21]=[d("新增动态")])),_:1})])]),default:a(()=>[ae((T(),oe(Q,{data:B.value,style:{width:"100%"}},{default:a(()=>[l(V,{prop:"title",label:"标题","min-width":"200","show-overflow-tooltip":""}),l(V,{prop:"field",label:"行业领域",width:"120"},{default:a(({row:t})=>[l(I,null,{default:a(()=>[d(f(t.field),1)]),_:2},1024)]),_:1}),l(V,{prop:"source",label:"来源",width:"150","show-overflow-tooltip":""}),l(V,{prop:"publishTime",label:"发布时间",width:"180",sortable:""}),l(V,{prop:"impact",label:"影响程度",width:"120"},{default:a(({row:t})=>[l(P,{modelValue:t.impact,"onUpdate:modelValue":y=>t.impact=y,disabled:"",max:3},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(V,{label:"操作",width:"200",fixed:"right"},{default:a(({row:t})=>[l(c,{link:"",type:"primary",onClick:y=>H(t)},{default:a(()=>e[23]||(e[23]=[d("详情")])),_:2},1032,["onClick"]),l(c,{link:"",type:"primary",onClick:y=>G(t)},{default:a(()=>e[24]||(e[24]=[d("编辑")])),_:2},1032,["onClick"]),l(c,{link:"",type:"danger",onClick:y=>J(t)},{default:a(()=>e[25]||(e[25]=[d("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Z,w.value]]),u("div",me,[l(W,{"current-page":g.currentPage,"onUpdate:currentPage":e[4]||(e[4]=t=>g.currentPage=t),"page-size":g.pageSize,"onUpdate:pageSize":e[5]||(e[5]=t=>g.pageSize=t),"page-sizes":[10,20,50,100],total:g.total,layout:"total, sizes, prev, pager, next",onSizeChange:L,onCurrentChange:A},null,8,["current-page","page-size","total"])])]),_:1}),l(N,{modelValue:k.value,"onUpdate:modelValue":e[16]||(e[16]=t=>k.value=t),title:D.value==="add"?"新增动态":"编辑动态",width:"60%","destroy-on-close":""},{footer:a(()=>[u("span",pe,[l(c,{onClick:e[15]||(e[15]=t=>k.value=!1)},{default:a(()=>e[26]||(e[26]=[d("取消")])),_:1}),l(c,{type:"primary",onClick:K,loading:h.value},{default:a(()=>e[27]||(e[27]=[d(" 确定 ")])),_:1},8,["loading"])])]),default:a(()=>[l(j,{ref_key:"formRef",ref:S,model:o,rules:Y,"label-width":"100px"},{default:a(()=>[l(i,{label:"标题",prop:"title"},{default:a(()=>[l(m,{modelValue:o.title,"onUpdate:modelValue":e[6]||(e[6]=t=>o.title=t)},null,8,["modelValue"])]),_:1}),l(i,{label:"行业领域",prop:"field"},{default:a(()=>[l(M,{modelValue:o.field,"onUpdate:modelValue":e[7]||(e[7]=t=>o.field=t),style:{width:"100%"}},{default:a(()=>[l(b,{label:"无人机制造",value:"manufacture"}),l(b,{label:"航空服务",value:"service"}),l(b,{label:"技术创新",value:"innovation"})]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"来源",prop:"source"},{default:a(()=>[l(m,{modelValue:o.source,"onUpdate:modelValue":e[8]||(e[8]=t=>o.source=t)},null,8,["modelValue"])]),_:1}),l(i,{label:"发布时间",prop:"publishTime"},{default:a(()=>[l($,{modelValue:o.publishTime,"onUpdate:modelValue":e[9]||(e[9]=t=>o.publishTime=t),type:"datetime",placeholder:"选择日期时间",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(i,{label:"影响程度",prop:"impact"},{default:a(()=>[l(P,{modelValue:o.impact,"onUpdate:modelValue":e[10]||(e[10]=t=>o.impact=t),max:3,texts:["一般","重要","重大"],"show-text":""},null,8,["modelValue"])]),_:1}),l(i,{label:"内容摘要",prop:"summary"},{default:a(()=>[l(m,{modelValue:o.summary,"onUpdate:modelValue":e[11]||(e[11]=t=>o.summary=t),type:"textarea",rows:4,placeholder:"请输入内容摘要"},null,8,["modelValue"])]),_:1}),l(i,{label:"详细内容",prop:"content"},{default:a(()=>[l(m,{modelValue:o.content,"onUpdate:modelValue":e[12]||(e[12]=t=>o.content=t),type:"textarea",rows:6,placeholder:"请输入详细内容"},null,8,["modelValue"])]),_:1}),l(i,{label:"相关链接",prop:"links"},{default:a(()=>[l(m,{modelValue:o.links,"onUpdate:modelValue":e[13]||(e[13]=t=>o.links=t),type:"textarea",rows:2,placeholder:"请输入相关链接，多个链接请换行分隔"},null,8,["modelValue"])]),_:1}),l(i,{label:"分析建议",prop:"suggestions"},{default:a(()=>[l(m,{modelValue:o.suggestions,"onUpdate:modelValue":e[14]||(e[14]=t=>o.suggestions=t),type:"textarea",rows:4,placeholder:"请输入分析建议"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(N,{modelValue:z.value,"onUpdate:modelValue":e[18]||(e[18]=t=>z.value=t),title:"动态详情",width:"60%"},{default:a(()=>[l(X,{column:2,border:""},{default:a(()=>[l(x,{label:"标题"},{default:a(()=>[d(f(r.value.title),1)]),_:1}),l(x,{label:"行业领域"},{default:a(()=>[l(I,null,{default:a(()=>[d(f(r.value.field),1)]),_:1})]),_:1}),l(x,{label:"来源"},{default:a(()=>[d(f(r.value.source),1)]),_:1}),l(x,{label:"发布时间"},{default:a(()=>[d(f(r.value.publishTime),1)]),_:1}),l(x,{label:"影响程度"},{default:a(()=>[l(P,{modelValue:r.value.impact,"onUpdate:modelValue":e[17]||(e[17]=t=>r.value.impact=t),disabled:"",max:3},null,8,["modelValue"])]),_:1})]),_:1}),u("div",fe,[e[28]||(e[28]=u("h4",null,"内容摘要",-1)),u("p",null,f(r.value.summary),1)]),u("div",ge,[e[29]||(e[29]=u("h4",null,"详细内容",-1)),u("p",null,f(r.value.content),1)]),r.value.links?(T(),U("div",ce,[e[30]||(e[30]=u("h4",null,"相关链接",-1)),u("div",_e,[(T(!0),U(ne,null,se(r.value.links.split(`
`),(t,y)=>(T(),U("a",{key:y,href:t,target:"_blank",rel:"noopener noreferrer"},f(t),9,ve))),128))])])):ue("",!0),u("div",be,[e[31]||(e[31]=u("h4",null,"分析建议",-1)),u("p",null,f(r.value.suggestions),1)])]),_:1},8,["modelValue"])])}}},ke=ee(Ve,[["__scopeId","data-v-8183b379"]]);export{ke as default};
