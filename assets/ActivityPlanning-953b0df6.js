import{_ as we,r as v,a as F,o as ke,c as i,n as Te,d as V,e as C,f as e,w as t,E as h,i as n,g as _,q as he,h as N,t as u,j as xe,F as O,p as Y,l as Z,s as Ce,C as Ue}from"./index-bbf05c48.js";const De={class:"activity-planning"},Re={class:"card-header"},Ae={class:"pagination"},ze={class:"milestone-actions"},Pe={class:"dialog-footer"},Se={class:"detail-section"},Me={class:"detail-section"},Be={class:"detail-section"},qe={__name:"ActivityPlanning",setup(Ee){const w=v(!1),z=v(!1),x=v(!1),P=v(!1),S=v("add"),M=v("basic"),B=v(null),r=v({}),g=F({name:"",type:"",status:"",dateRange:[]}),b=F({currentPage:1,pageSize:10,total:0}),o=F({name:"",type:"online",dateRange:[],budget:0,targetAudience:[],theme:"",description:"",highlights:"",team:[],milestones:[{date:"",task:""}],participationTarget:0,conversionTarget:0,expectedRevenue:0,otherTargets:""}),ee=[{label:"张三",value:"zhangsan"},{label:"李四",value:"lisi"}],L=v([]),le={name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],type:[{required:!0,message:"请选择活动类型",trigger:"change"}],dateRange:[{required:!0,message:"请选择活动时间",trigger:"change"}],budget:[{required:!0,message:"请输入活动预算",trigger:"blur"}],theme:[{required:!0,message:"请输入活动主题",trigger:"blur"}],description:[{required:!0,message:"请输入活动描述",trigger:"blur"}]},I=d=>({preparing:"info",ongoing:"warning",finished:"success"})[d]||"",G=d=>({preparing:"筹备中",ongoing:"进行中",finished:"已结束"})[d]||d,H=()=>{k()},te=()=>{Object.keys(g).forEach(d=>{g[d]=""}),g.dateRange=[],H()},ae=d=>{b.pageSize=d,k()},oe=d=>{b.currentPage=d,k()},J=(d="add",l=null)=>{S.value=d,x.value=!0,M.value="basic",d==="edit"&&l?Object.assign(o,l):Object.keys(o).forEach(p=>{Array.isArray(o[p])?o[p]=p==="milestones"?[{date:"",task:""}]:[]:typeof o[p]=="number"?o[p]=0:o[p]=p==="type"?"online":""})},ne=d=>{J("edit",d)},de=d=>{r.value=d,P.value=!0},ie=d=>{Z.confirm("确定要开始该活动吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{w.value=!0;try{await new Promise(l=>setTimeout(l,1e3)),h.success("活动已开始"),k()}catch{h.error("操作失败")}finally{w.value=!1}})},se=d=>{Z.confirm("确定要删除该活动吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{w.value=!0;try{await new Promise(l=>setTimeout(l,1e3)),h.success("删除成功"),k()}catch{h.error("删除失败")}finally{w.value=!1}})},ue=()=>{o.milestones.push({date:"",task:""})},re=d=>{o.milestones.splice(d,1)},pe=async()=>{if(B.value)try{await B.value.validate(),z.value=!0,await new Promise(d=>setTimeout(d,1e3)),h.success(S.value==="add"?"添加成功":"更新成功"),x.value=!1,k()}catch{h.error("表单验证失败，请检查必填项")}finally{z.value=!1}},k=async()=>{w.value=!0;try{await new Promise(d=>setTimeout(d,1e3)),L.value=[{name:"示例活动1",type:"online",startDate:"2024-01-15",endDate:"2024-01-20",status:"preparing",budget:5e4,theme:"新品发布会",description:"发布最新产品系列",highlights:"多项创新技术展示",milestones:[{date:"2024-01-15",task:"活动启动"},{date:"2024-01-20",task:"产品发布"}],participationTarget:1e3,conversionTarget:100,expectedRevenue:2e5},{name:"示例活动2",type:"offline",startDate:"2024-01-10",endDate:"2024-01-12",status:"ongoing",budget:3e4,theme:"技术交流会",description:"行业技术分享与交流",highlights:"专家现场指导",milestones:[{date:"2024-01-10",task:"开幕式"},{date:"2024-01-12",task:"总结会"}],participationTarget:500,conversionTarget:50,expectedRevenue:1e5}],b.total=20}catch{h.error("加载数据失败")}finally{w.value=!1}};return ke(()=>{k()}),(d,l)=>{const p=i("el-input"),s=i("el-form-item"),c=i("el-option"),U=i("el-select"),q=i("el-date-picker"),f=i("el-button"),K=i("el-form"),Q=i("el-card"),T=i("el-table-column"),E=i("el-tag"),me=i("el-table"),ge=i("el-pagination"),W=i("el-radio"),fe=i("el-radio-group"),D=i("el-input-number"),R=i("el-tab-pane"),$=i("el-col"),_e=i("el-icon"),ce=i("el-row"),ve=i("el-tabs"),X=i("el-dialog"),m=i("el-descriptions-item"),j=i("el-descriptions"),be=i("el-timeline-item"),ye=i("el-timeline"),Ve=Te("loading");return V(),C("div",De,[e(Q,{class:"filter-card"},{default:t(()=>[e(K,{inline:!0,model:g,class:"search-form"},{default:t(()=>[e(s,{label:"活动名称"},{default:t(()=>[e(p,{modelValue:g.name,"onUpdate:modelValue":l[0]||(l[0]=a=>g.name=a),placeholder:"请输入活动名称",clearable:""},null,8,["modelValue"])]),_:1}),e(s,{label:"活动类型"},{default:t(()=>[e(U,{modelValue:g.type,"onUpdate:modelValue":l[1]||(l[1]=a=>g.type=a),placeholder:"请选择",clearable:""},{default:t(()=>[e(c,{label:"线上活动",value:"online"}),e(c,{label:"线下活动",value:"offline"})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"活动状态"},{default:t(()=>[e(U,{modelValue:g.status,"onUpdate:modelValue":l[2]||(l[2]=a=>g.status=a),placeholder:"请选择",clearable:""},{default:t(()=>[e(c,{label:"筹备中",value:"preparing"}),e(c,{label:"进行中",value:"ongoing"}),e(c,{label:"已结束",value:"finished"})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"活动时间"},{default:t(()=>[e(q,{modelValue:g.dateRange,"onUpdate:modelValue":l[3]||(l[3]=a=>g.dateRange=a),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(f,{type:"primary",onClick:H},{default:t(()=>l[23]||(l[23]=[n("搜索")])),_:1}),e(f,{onClick:te},{default:t(()=>l[24]||(l[24]=[n("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(Q,{class:"list-card"},{header:t(()=>[_("div",Re,[l[26]||(l[26]=_("h2",null,"活动列表",-1)),e(f,{type:"primary",onClick:J},{default:t(()=>l[25]||(l[25]=[n("新增活动")])),_:1})])]),default:t(()=>[he((V(),N(me,{data:L.value,style:{width:"100%"}},{default:t(()=>[e(T,{prop:"name",label:"活动名称","min-width":"180","show-overflow-tooltip":""}),e(T,{prop:"type",label:"活动类型",width:"120"},{default:t(({row:a})=>[e(E,null,{default:t(()=>[n(u(a.type==="online"?"线上活动":"线下活动"),1)]),_:2},1024)]),_:1}),e(T,{prop:"startDate",label:"开始时间",width:"180",sortable:""}),e(T,{prop:"endDate",label:"结束时间",width:"180",sortable:""}),e(T,{prop:"status",label:"活动状态",width:"120"},{default:t(({row:a})=>[e(E,{type:I(a.status)},{default:t(()=>[n(u(G(a.status)),1)]),_:2},1032,["type"])]),_:1}),e(T,{prop:"budget",label:"预算",width:"120"},{default:t(({row:a})=>[n(" ¥"+u(a.budget),1)]),_:1}),e(T,{label:"操作",width:"250",fixed:"right"},{default:t(({row:a})=>[e(f,{link:"",type:"primary",onClick:y=>de(a)},{default:t(()=>l[27]||(l[27]=[n("详情")])),_:2},1032,["onClick"]),e(f,{link:"",type:"primary",onClick:y=>ne(a)},{default:t(()=>l[28]||(l[28]=[n("编辑")])),_:2},1032,["onClick"]),a.status==="preparing"?(V(),N(f,{key:0,link:"",type:"success",onClick:y=>ie(a)},{default:t(()=>l[29]||(l[29]=[n(" 开始活动 ")])),_:2},1032,["onClick"])):xe("",!0),e(f,{link:"",type:"danger",onClick:y=>se(a)},{default:t(()=>l[30]||(l[30]=[n("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Ve,w.value]]),_("div",Ae,[e(ge,{"current-page":b.currentPage,"onUpdate:currentPage":l[4]||(l[4]=a=>b.currentPage=a),"page-size":b.pageSize,"onUpdate:pageSize":l[5]||(l[5]=a=>b.pageSize=a),"page-sizes":[10,20,50,100],total:b.total,layout:"total, sizes, prev, pager, next",onSizeChange:ae,onCurrentChange:oe},null,8,["current-page","page-size","total"])])]),_:1}),e(X,{modelValue:x.value,"onUpdate:modelValue":l[21]||(l[21]=a=>x.value=a),title:S.value==="add"?"新增活动":"编辑活动",width:"60%","destroy-on-close":""},{footer:t(()=>[_("span",Pe,[e(f,{onClick:l[20]||(l[20]=a=>x.value=!1)},{default:t(()=>l[38]||(l[38]=[n("取消")])),_:1}),e(f,{type:"primary",onClick:pe,loading:z.value},{default:t(()=>l[39]||(l[39]=[n(" 确定 ")])),_:1},8,["loading"])])]),default:t(()=>[e(K,{ref_key:"formRef",ref:B,model:o,rules:le,"label-width":"100px"},{default:t(()=>[e(ve,{modelValue:M.value,"onUpdate:modelValue":l[19]||(l[19]=a=>M.value=a)},{default:t(()=>[e(R,{label:"基本信息",name:"basic"},{default:t(()=>[e(s,{label:"活动名称",prop:"name"},{default:t(()=>[e(p,{modelValue:o.name,"onUpdate:modelValue":l[6]||(l[6]=a=>o.name=a)},null,8,["modelValue"])]),_:1}),e(s,{label:"活动类型",prop:"type"},{default:t(()=>[e(fe,{modelValue:o.type,"onUpdate:modelValue":l[7]||(l[7]=a=>o.type=a)},{default:t(()=>[e(W,{label:"online"},{default:t(()=>l[31]||(l[31]=[n("线上活动")])),_:1}),e(W,{label:"offline"},{default:t(()=>l[32]||(l[32]=[n("线下活动")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"活动时间",prop:"dateRange"},{default:t(()=>[e(q,{modelValue:o.dateRange,"onUpdate:modelValue":l[8]||(l[8]=a=>o.dateRange=a),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(s,{label:"活动预算",prop:"budget"},{default:t(()=>[e(D,{modelValue:o.budget,"onUpdate:modelValue":l[9]||(l[9]=a=>o.budget=a),min:0,precision:2,style:{width:"100%"}},{append:t(()=>l[33]||(l[33]=[n("元")])),_:1},8,["modelValue"])]),_:1}),e(s,{label:"目标人群",prop:"targetAudience"},{default:t(()=>[e(U,{modelValue:o.targetAudience,"onUpdate:modelValue":l[10]||(l[10]=a=>o.targetAudience=a),multiple:"",placeholder:"请选择目标人群",style:{width:"100%"}},{default:t(()=>[e(c,{label:"企业客户",value:"business"}),e(c,{label:"个人用户",value:"individual"}),e(c,{label:"政府机构",value:"government"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(R,{label:"活动内容",name:"content"},{default:t(()=>[e(s,{label:"活动主题",prop:"theme"},{default:t(()=>[e(p,{modelValue:o.theme,"onUpdate:modelValue":l[11]||(l[11]=a=>o.theme=a)},null,8,["modelValue"])]),_:1}),e(s,{label:"活动描述",prop:"description"},{default:t(()=>[e(p,{modelValue:o.description,"onUpdate:modelValue":l[12]||(l[12]=a=>o.description=a),type:"textarea",rows:4,placeholder:"请详细描述活动内容"},null,8,["modelValue"])]),_:1}),e(s,{label:"活动亮点",prop:"highlights"},{default:t(()=>[e(p,{modelValue:o.highlights,"onUpdate:modelValue":l[13]||(l[13]=a=>o.highlights=a),type:"textarea",rows:4,placeholder:"请描述活动亮点和特色"},null,8,["modelValue"])]),_:1})]),_:1}),e(R,{label:"执行计划",name:"plan"},{default:t(()=>[e(s,{label:"执行团队",prop:"team"},{default:t(()=>[e(U,{modelValue:o.team,"onUpdate:modelValue":l[14]||(l[14]=a=>o.team=a),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择或输入执行团队成员",style:{width:"100%"}},{default:t(()=>[(V(),C(O,null,Y(ee,a=>e(c,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"关键节点",prop:"milestones"},{default:t(()=>[(V(!0),C(O,null,Y(o.milestones,(a,y)=>(V(),C("div",{key:y,class:"milestone-item"},[e(ce,{gutter:20},{default:t(()=>[e($,{span:8},{default:t(()=>[e(q,{modelValue:a.date,"onUpdate:modelValue":A=>a.date=A,type:"date",placeholder:"选择日期",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e($,{span:14},{default:t(()=>[e(p,{modelValue:a.task,"onUpdate:modelValue":A=>a.task=A,placeholder:"请输入节点任务"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e($,{span:2},{default:t(()=>[e(f,{type:"danger",link:"",onClick:A=>re(y),disabled:o.milestones.length<=1},{default:t(()=>[e(_e,null,{default:t(()=>[e(Ce(Ue))]),_:1})]),_:2},1032,["onClick","disabled"])]),_:2},1024)]),_:2},1024)]))),128)),_("div",ze,[e(f,{type:"primary",link:"",onClick:ue},{default:t(()=>l[34]||(l[34]=[n(" 添加节点 ")])),_:1})])]),_:1})]),_:1}),e(R,{label:"预期效果",name:"expected"},{default:t(()=>[e(s,{label:"参与目标",prop:"participationTarget"},{default:t(()=>[e(D,{modelValue:o.participationTarget,"onUpdate:modelValue":l[15]||(l[15]=a=>o.participationTarget=a),min:0,style:{width:"100%"}},{append:t(()=>l[35]||(l[35]=[n("人")])),_:1},8,["modelValue"])]),_:1}),e(s,{label:"转化目标",prop:"conversionTarget"},{default:t(()=>[e(D,{modelValue:o.conversionTarget,"onUpdate:modelValue":l[16]||(l[16]=a=>o.conversionTarget=a),min:0,style:{width:"100%"}},{append:t(()=>l[36]||(l[36]=[n("人")])),_:1},8,["modelValue"])]),_:1}),e(s,{label:"预期收益",prop:"expectedRevenue"},{default:t(()=>[e(D,{modelValue:o.expectedRevenue,"onUpdate:modelValue":l[17]||(l[17]=a=>o.expectedRevenue=a),min:0,precision:2,style:{width:"100%"}},{append:t(()=>l[37]||(l[37]=[n("元")])),_:1},8,["modelValue"])]),_:1}),e(s,{label:"其他目标",prop:"otherTargets"},{default:t(()=>[e(p,{modelValue:o.otherTargets,"onUpdate:modelValue":l[18]||(l[18]=a=>o.otherTargets=a),type:"textarea",rows:4,placeholder:"请描述其他预期目标"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e(X,{modelValue:P.value,"onUpdate:modelValue":l[22]||(l[22]=a=>P.value=a),title:"活动详情",width:"60%"},{default:t(()=>[e(j,{column:2,border:""},{default:t(()=>[e(m,{label:"活动名称"},{default:t(()=>[n(u(r.value.name),1)]),_:1}),e(m,{label:"活动类型"},{default:t(()=>[n(u(r.value.type==="online"?"线上活动":"线下活动"),1)]),_:1}),e(m,{label:"开始时间"},{default:t(()=>[n(u(r.value.startDate),1)]),_:1}),e(m,{label:"结束时间"},{default:t(()=>[n(u(r.value.endDate),1)]),_:1}),e(m,{label:"活动预算"},{default:t(()=>[n("¥"+u(r.value.budget),1)]),_:1}),e(m,{label:"活动状态"},{default:t(()=>[e(E,{type:I(r.value.status)},{default:t(()=>[n(u(G(r.value.status)),1)]),_:1},8,["type"])]),_:1})]),_:1}),_("div",Se,[l[40]||(l[40]=_("h4",null,"活动内容",-1)),e(j,{column:1,border:""},{default:t(()=>[e(m,{label:"活动主题"},{default:t(()=>[n(u(r.value.theme),1)]),_:1}),e(m,{label:"活动描述"},{default:t(()=>[n(u(r.value.description),1)]),_:1}),e(m,{label:"活动亮点"},{default:t(()=>[n(u(r.value.highlights),1)]),_:1})]),_:1})]),_("div",Me,[l[41]||(l[41]=_("h4",null,"执行计划",-1)),e(ye,null,{default:t(()=>[(V(!0),C(O,null,Y(r.value.milestones,(a,y)=>(V(),N(be,{key:y,timestamp:a.date},{default:t(()=>[n(u(a.task),1)]),_:2},1032,["timestamp"]))),128))]),_:1})]),_("div",Be,[l[42]||(l[42]=_("h4",null,"预期效果",-1)),e(j,{column:2,border:""},{default:t(()=>[e(m,{label:"参与目标"},{default:t(()=>[n(u(r.value.participationTarget)+"人",1)]),_:1}),e(m,{label:"转化目标"},{default:t(()=>[n(u(r.value.conversionTarget)+"人",1)]),_:1}),e(m,{label:"预期收益"},{default:t(()=>[n("¥"+u(r.value.expectedRevenue),1)]),_:1}),e(m,{label:"其他目标"},{default:t(()=>[n(u(r.value.otherTargets),1)]),_:1})]),_:1})])]),_:1},8,["modelValue"])])}}},je=we(qe,[["__scopeId","data-v-48229b66"]]);export{je as default};
