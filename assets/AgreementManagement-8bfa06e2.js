import{_ as Je,u as Qe,r,a as O,m as We,o as Xe,c as u,n as Ze,d as s,e as _,f as l,w as a,E as y,F as k,p as C,i as d,g as n,q as et,h as m,t as i,j as V,k as fe,s as g,l as tt,v as K,x as G,y as ge,z as ye,A as he,B as lt}from"./index-bbf05c48.js";const at={class:"agreement-management"},nt={class:"card-header"},ot={class:"pagination"},st={class:"dialog-footer"},it={class:"template-header"},dt={class:"template-basic-info"},rt={class:"version"},ut={class:"update-time"},pt={class:"template-description"},ct={class:"template-content"},mt={class:"template-sections"},vt={class:"section-header"},_t=["innerHTML"],ft={class:"highlights-grid"},gt={class:"highlight-header"},yt={class:"highlight-content"},ht={class:"version-changes"},wt={class:"version-compare"},bt={class:"change-summary"},kt={class:"diff-view"},Ct={class:"diff-header"},Vt={class:"diff-content"},Tt={class:"old-version"},Ut={class:"new-version"},xt={class:"review-comments"},Dt={class:"comment-header"},St={class:"reviewer"},Mt={class:"time"},zt={class:"comment-content"},At={class:"template-select"},Lt={class:"template-preview-container"},$t={class:"template-info"},Bt={class:"info-header"},Ft={class:"template-version"},Rt={class:"template-update-time"},Nt={class:"template-description"},Pt={class:"template-content-wrapper"},jt={class:"template-main-content"},Et={class:"template-sections-scroll"},qt={class:"section-title"},It=["innerHTML"],Ht={class:"template-sidebar"},Yt={class:"highlights-header"},Ot={class:"highlights-scroll"},Kt={class:"highlights-wrapper"},Gt={class:"highlight-block-header"},Jt={class:"highlight-block-content"},Qt={class:"dialog-footer"},Wt={class:"template-select-dialog"},Xt={class:"template-list"},Zt=["onClick"],el={class:"template-item-header"},tl={class:"template-item-left"},ll={class:"template-name"},al={class:"template-description"},nl={class:"template-meta"},ol={class:"dialog-footer"},sl={class:"dialog-footer"},il={__name:"AgreementManagement",setup(dl){const le=Qe(),we=[{label:"草稿",value:"draft"},{label:"审核中",value:"reviewing"},{label:"已通过",value:"approved"},{label:"已驳回",value:"rejected"}],D=r(!1),j=r(!1),J=r(!1),E=r(null),Q=r([]),q=r(!1),ae=r(!1),p=r(null);r("content");const W=r([]),ne=r([]),B=r(!1),U=O({name:"",templateId:"",additionalContent:""}),h=O({name:"",status:"",dateRange:[]}),x=O({currentPage:1,pageSize:10,total:0}),oe=r([]),I=r([]),X=r(""),F=r(!1),R=r(""),A=r(null),be=We(()=>{if(!R.value)return I.value;const o=R.value.toLowerCase();return I.value.filter(e=>e.name.toLowerCase().includes(o)||e.description.toLowerCase().includes(o))}),ke=o=>({draft:"info",reviewing:"warning",approved:"success",rejected:"danger"})[o]||"info",Ce=o=>({draft:"草稿",reviewing:"审核中",approved:"已通过",rejected:"已驳回"})[o]||o,se=()=>{S()},Ve=()=>{Object.keys(h).forEach(o=>{h[o]=""}),h.dateRange=[],se()},Te=o=>{x.pageSize=o,S()},Ue=o=>{x.currentPage=o,S()},xe=()=>{B.value=!0,Fe()},De=o=>{E.value=o},Se=()=>{E.value&&(j.value=!1,le.push({name:"AgreementDraft",query:{templateId:E.value.id}}))},Me=o=>{le.push({name:"AgreementDraft",query:{id:o.id}})},N=r(!1),ze=r(null),L=O({comment:""}),Ae=async o=>{ze.value=o,N.value=!0},Le=async()=>{if(!L.comment.trim()){y.warning("请填写审核意见");return}try{D.value=!0,await new Promise(o=>setTimeout(o,1e3)),Q.value.unshift({id:Date.now(),reviewer:"提交人",time:new Date().toLocaleString(),content:L.comment}),y.success("提交审核成功"),N.value=!1,L.comment="",S()}catch{y.error("提交审核失败")}finally{D.value=!1}},$e=o=>{Q.value=[{id:1,reviewer:"审核员A",time:"2024-01-15 14:30:00",content:"第三条款中关于收益分配的描述需要更加明确"},{id:2,reviewer:"审核员B",time:"2024-01-15 15:00:00",content:"建议补充违约责任相关条款"}],J.value=!0},Be=o=>{tt.confirm("确定要删除该协议吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{D.value=!0;try{await new Promise(e=>setTimeout(e,1e3)),y.success("删除成功"),S()}catch{y.error("删除失败")}finally{D.value=!1}})},S=async()=>{D.value=!0;try{await new Promise(o=>setTimeout(o,1e3)),oe.value=[{id:1,name:"战略合作协议-A公司",templateName:"战略合作协议模板",status:"draft",createTime:"2024-01-15 14:30:00",updateTime:"2024-01-15 14:30:00"},{id:2,name:"业务合作协议-B公司",templateName:"业务合作协议模板",status:"reviewing",createTime:"2024-01-14 09:00:00",updateTime:"2024-01-15 10:00:00"},{id:3,name:"代理协议-C公司",templateName:"代理协议模板",status:"rejected",createTime:"2024-01-13 16:00:00",updateTime:"2024-01-14 11:30:00"}],x.total=20}catch{y.error("加载数据失败")}finally{D.value=!1}},Fe=async()=>{try{await new Promise(o=>setTimeout(o,1e3)),I.value=[{id:1,name:"标准合作协议模板",description:"适用于一般性业务合作伙伴关系",updateTime:"2024-01-01 10:00:00",version:"v2.1",hasUpdate:!0,sections:[{title:"第一条 合作期限",content:`
              1.1 本协议有效期为自签订之日起2年。
              1.2 合作期满前30天，双方可协商续约事宜。
              1.3 续约时需重新评估合作条件，包括但不限于业绩指标、收益分配等。
            `,notes:"续约需提前一个月发起申请，避免合作中断"},{title:"第二条 区域限制",content:`
              2.1 合作商经营区域限定在约定的行政区域范围内。
              2.2 未经平台书面许可，不得跨区域经营。
              2.3 区域保护：平台承诺在约定区域内不再发展其他合作商。
            `,notes:"区域边界需明确界定，避免纠纷"},{title:"第三条 权益分配",content:`
              3.1 平台与合作商的收益分配比例为7:3。
              3.2 收益计算方式：以实际成交金额为基数。
              3.3 结算周期：每月结算一次。
            `,notes:"重点关注分成比例的调整机制和结算时间"},{title:"第四条 业绩考核",content:`
              4.1 季度最低销售额要求：100万元
              4.2 年度目标完成率要求：不低于85%
              4.3 考核未达标处理方式
            `,notes:"业绩指标将根据市场情况适时调整"}],highlights:[{type:"warning",title:"业绩考核指标",content:"季度销售额100万元，年度目标完成率85%"},{type:"danger",title:"违约责任",content:"跨区域经营将承担销售额20%的违约金"},{type:"primary",title:"收益分配",content:"平台与合作商收益比例7:3，每月结算"}]},{id:2,name:"战略合作协议模板",description:"适用于长期战略合作伙伴关系",updateTime:"2024-01-05 09:00:00",version:"v1.8",hasUpdate:!1,sections:[{title:"第一条 战略合作目标",content:`
              1.1 双方本着"优势互补、互利共赢"的原则开展战略合作。
              1.2 建立长期稳定的战略合作伙伴关系。
              1.3 共同开拓市场，提升品牌价值。
            `,notes:"明确合作愿景和目标"},{title:"第二条 合作领域",content:`
              2.1 市场开发：共同开发和拓展市场。
              2.2 品牌建设：共享品牌资源，协同推广。
              2.3 技术创新：共同研发和技术升级。
            `,notes:"重点关注合作范围界定"},{title:"第三条 资源共享",content:`
              3.1 渠道资源共享机制。
              3.2 客户资源互通规则。
              3.3 技术资源整合方案。
            `,notes:"注意资源共享的保密条款"}],highlights:[{type:"primary",title:"合作期限",content:"初始合作期限5年，可续约"},{type:"warning",title:"最低投入",content:"年度市场投入不低于500万元"}]},{id:3,name:"代理商协议模板",description:"适用于代理商合作关系",updateTime:"2024-01-10 14:00:00",version:"v2.3",hasUpdate:!0,sections:[{title:"第一条 代理权限",content:`
              1.1 代理区域：指定行政区域范围。
              1.2 代理产品：全系列产品代理权。
              1.3 代理级别：一级代理商资格。
            `,notes:"明确代理权限范围和限制"},{title:"第二条 销售任务",content:`
              2.1 年度销售目标：不低于1000万元。
              2.2 季度任务考核：每季度不低于250万元。
              2.3 未完成任务的处理方式。
            `,notes:"销售指标可根据市场情况调整"},{title:"第三条 返利政策",content:`
              3.1 基础返利：完成基础任务返利5%。
              3.2 增量返利：超额完成部分返利8%。
              3.3 返利计算及发放方式。
            `,notes:"返利政策每年度更新一次"}],highlights:[{type:"primary",title:"代理级别",content:"一级代理商，享有区域独家代理权"},{type:"warning",title:"销售指标",content:"年度销售额1000万，季度250万"},{type:"success",title:"返利政策",content:"基础返利5%，增量返利8%"}]},{id:4,name:"加盟商协议模板",description:"适用于连锁加盟业务",updateTime:"2024-01-15 16:00:00",version:"v1.5",hasUpdate:!1,sections:[{title:"第一条 加盟条件",content:`
              1.1 加盟费：30万元/家店。
              1.2 店面要求：面积不少于100平米。
              1.3 位置要求：商业核心区域。
            `,notes:"加盟条件可能因城市等级不同而调整"},{title:"第二条 品牌使用",content:`
              2.1 品牌授权范围。
              2.2 店面形象要求。
              2.3 营运规范遵守。
            `,notes:"严格遵守品牌形象规范"},{title:"第三条 利润分配",content:`
              3.1 加盟商承担运营成本。
              3.2 按营业额比例收取管理费。
              3.3 货品统一采购定价。
            `,notes:"利润分配方案需遵守当地法规"}],highlights:[{type:"danger",title:"加盟费用",content:"初始加盟费30万元/店"},{type:"warning",title:"场地要求",content:"核心商圈，面积≥100平米"},{type:"primary",title:"管理费用",content:"营业额3%的持续管理费"}]}]}catch{y.error("加载模板失败")}},Re=async o=>{try{p.value={...o,version:"v2.1",hasUpdate:!0,versionInfo:{releaseDate:"2024-01-15",updateLog:"调整了业绩考核指标和违约金比例"}},W.value=[{type:"primary",title:"业绩考核指标调整",description:"季度考核指标由80万调整为100万"},{type:"warning",title:"违约金比例变更",description:"跨区域经营违约金比例由15%上调至20%"},{type:"info",title:"结算周期优化",description:"结算周期由季度改为月度，提高资金周转效率"}],ne.value=[{type:"modified",section:"第四条 业绩考核",oldContent:`4.1 季度最低销售额要求：80万元
4.2 年度目标完成率要求：不低于80%`,newContent:`4.1 季度最低销售额要求：100万元
4.2 年度目标完成率要求：不低于85%`},{type:"modified",section:"第八条 违约责任",oldContent:"跨区域经营将承担销售额15%的违约金",newContent:"跨区域经营将承担销售额20%的违约金"},{type:"added",section:"第三条 权益分配",oldContent:"3.3 结算周期：每季度结算一次",newContent:"3.3 结算周期：每月结算一次"}],q.value=!0}catch{y.error("加载模板详情失败")}},ie=o=>({warning:"#E6A23C",danger:"#F56C6C",primary:"#409EFF"})[o]||"#909399",Ne=ie,Pe=()=>{if(!U.name||!U.templateId){y.warning("请填写必要信息");return}y.success("创建协议成功"),B.value=!1,S()},je=()=>{F.value=!0,R.value=""},Ee=o=>{A.value=o},qe=()=>{A.value?(U.templateId=A.value.id,X.value=A.value.name,p.value=A.value,F.value=!1):y.warning("请选择一个模板")},Ie=o=>{p.value=o,q.value=!0};return Xe(()=>{S()}),(o,e)=>{var me;const $=u("el-input"),T=u("el-form-item"),He=u("el-option"),Ye=u("el-select"),Oe=u("el-date-picker"),v=u("el-button"),Z=u("el-form"),ee=u("el-card"),w=u("el-table-column"),H=u("el-tag"),de=u("el-table"),Ke=u("el-pagination"),M=u("el-dialog"),z=u("el-icon"),re=u("el-tooltip"),P=u("el-tab-pane"),ue=u("el-timeline-item"),pe=u("el-timeline"),ce=u("el-tabs"),Ge=Ze("loading");return s(),_("div",at,[l(ee,{class:"filter-card"},{default:a(()=>[l(Z,{inline:!0,model:h,class:"search-form"},{default:a(()=>[l(T,{label:"协议名称"},{default:a(()=>[l($,{modelValue:h.name,"onUpdate:modelValue":e[0]||(e[0]=t=>h.name=t),placeholder:"请输入协议名称",clearable:""},null,8,["modelValue"])]),_:1}),l(T,{label:"协议状态"},{default:a(()=>[l(Ye,{modelValue:h.status,"onUpdate:modelValue":e[1]||(e[1]=t=>h.status=t),placeholder:"请选择",clearable:""},{default:a(()=>[(s(),_(k,null,C(we,t=>l(He,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(T,{label:"创建时间"},{default:a(()=>[l(Oe,{modelValue:h.dateRange,"onUpdate:modelValue":e[2]||(e[2]=t=>h.dateRange=t),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),l(T,null,{default:a(()=>[l(v,{type:"primary",onClick:se},{default:a(()=>e[21]||(e[21]=[d("搜索")])),_:1}),l(v,{onClick:Ve},{default:a(()=>e[22]||(e[22]=[d("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(ee,{class:"list-card"},{header:a(()=>[n("div",nt,[e[24]||(e[24]=n("h2",null,"协议管理",-1)),l(v,{type:"primary",onClick:xe},{default:a(()=>e[23]||(e[23]=[d("新建协议")])),_:1})])]),default:a(()=>[et((s(),m(de,{data:oe.value,style:{width:"100%"}},{default:a(()=>[l(w,{prop:"name",label:"协议名称","min-width":"180","show-overflow-tooltip":""}),l(w,{prop:"templateName",label:"模板来源",width:"150","show-overflow-tooltip":""}),l(w,{prop:"status",label:"状态",width:"120"},{default:a(({row:t})=>[l(H,{type:ke(t.status)},{default:a(()=>[d(i(Ce(t.status)),1)]),_:2},1032,["type"])]),_:1}),l(w,{prop:"createTime",label:"创建时间",width:"180",sortable:""}),l(w,{prop:"updateTime",label:"最后修改",width:"180",sortable:""}),l(w,{label:"操作",width:"250",fixed:"right"},{default:a(({row:t})=>[l(v,{link:"",type:"primary",onClick:c=>Me(t)},{default:a(()=>e[25]||(e[25]=[d("编辑")])),_:2},1032,["onClick"]),t.status==="rejected"?(s(),m(v,{key:0,link:"",type:"primary",onClick:c=>$e(t)},{default:a(()=>e[26]||(e[26]=[d(" 查看意见 ")])),_:2},1032,["onClick"])):V("",!0),["draft","rejected"].includes(t.status)?(s(),m(v,{key:1,link:"",type:"success",onClick:c=>Ae(t)},{default:a(()=>e[27]||(e[27]=[d(" 提交审核 ")])),_:2},1032,["onClick"])):V("",!0),l(v,{link:"",type:"danger",onClick:c=>Be(t)},{default:a(()=>e[28]||(e[28]=[d("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Ge,D.value]]),n("div",ot,[l(Ke,{"current-page":x.currentPage,"onUpdate:currentPage":e[3]||(e[3]=t=>x.currentPage=t),"page-size":x.pageSize,"onUpdate:pageSize":e[4]||(e[4]=t=>x.pageSize=t),"page-sizes":[10,20,50,100],total:x.total,layout:"total, sizes, prev, pager, next",onSizeChange:Te,onCurrentChange:Ue},null,8,["current-page","page-size","total"])])]),_:1}),l(M,{modelValue:j.value,"onUpdate:modelValue":e[6]||(e[6]=t=>j.value=t),title:"选择协议模板",width:"50%"},{footer:a(()=>[n("span",st,[l(v,{onClick:e[5]||(e[5]=t=>j.value=!1)},{default:a(()=>e[30]||(e[30]=[d("取消")])),_:1}),l(v,{type:"primary",onClick:Se,disabled:!E.value},{default:a(()=>e[31]||(e[31]=[d(" 确定使用 ")])),_:1},8,["disabled"])])]),default:a(()=>[l(de,{data:I.value,"highlight-current-row":"",onCurrentChange:De,style:{width:"100%"}},{default:a(()=>[l(w,{prop:"name",label:"模板名称"}),l(w,{prop:"description",label:"说明","show-overflow-tooltip":""}),l(w,{prop:"updateTime",label:"更新时间",width:"180"}),l(w,{label:"操作",width:"120",fixed:"right"},{default:a(({row:t})=>[l(v,{link:"",type:"primary",onClick:fe(c=>Re(t),["stop"])},{default:a(()=>e[29]||(e[29]=[d("查看模板")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"]),l(M,{modelValue:q.value,"onUpdate:modelValue":e[7]||(e[7]=t=>q.value=t),title:`${((me=p.value)==null?void 0:me.name)||"模板详情"}`,width:"70%"},{default:a(()=>{var t,c,Y,ve;return[n("div",it,[n("div",dt,[n("span",rt,"版本："+i((t=p.value)==null?void 0:t.version),1),n("span",ut,"更新时间："+i((c=p.value)==null?void 0:c.updateTime),1),(Y=p.value)!=null&&Y.hasUpdate?(s(),m(H,{key:0,type:"warning",size:"small"},{default:a(()=>e[32]||(e[32]=[d("有新版本")])),_:1})):V("",!0)]),n("div",pt,i((ve=p.value)==null?void 0:ve.description),1)]),n("div",ct,[l(ce,{class:"template-detail-tabs"},{default:a(()=>{var _e;return[l(P,{label:"基本条款"},{default:a(()=>{var b;return[n("div",mt,[(s(!0),_(k,null,C((b=p.value)==null?void 0:b.sections,(f,te)=>(s(),_("div",{key:te,class:"section-item"},[n("div",vt,[n("h4",null,i(f.title),1),f.notes?(s(),m(re,{key:0,content:f.notes,placement:"top"},{default:a(()=>[l(z,{class:"note-icon"},{default:a(()=>[l(g(K))]),_:1})]),_:2},1032,["content"])):V("",!0)]),n("div",{class:"section-content",innerHTML:f.content},null,8,_t)]))),128))])]}),_:1}),l(P,{label:"重点条款"},{default:a(()=>{var b;return[n("div",ft,[(s(!0),_(k,null,C((b=p.value)==null?void 0:b.highlights,(f,te)=>(s(),m(ee,{key:te,class:G(["highlight-card",f.type]),shadow:"hover"},{header:a(()=>[n("div",gt,[l(z,null,{default:a(()=>[f.type==="warning"?(s(),m(g(ge),{key:0})):V("",!0),f.type==="success"?(s(),m(g(ye),{key:1})):(s(),m(g(K),{key:2}))]),_:2},1024),n("span",null,i(f.title),1)])]),default:a(()=>[n("div",yt,i(f.content),1)]),_:2},1032,["class"]))),128))])]}),_:1}),(_e=p.value)!=null&&_e.hasUpdate?(s(),m(P,{key:0,label:"修改记录"},{default:a(()=>[n("div",ht,[l(pe,null,{default:a(()=>[(s(!0),_(k,null,C(W.value,(b,f)=>(s(),m(ue,{key:f,type:b.type,color:ie(b.type)},{default:a(()=>[n("h4",null,i(b.title),1),n("p",null,i(b.description),1)]),_:2},1032,["type","color"]))),128))]),_:1})])]),_:1})):V("",!0)]}),_:1})])]}),_:1},8,["modelValue","title"]),l(M,{modelValue:ae.value,"onUpdate:modelValue":e[8]||(e[8]=t=>ae.value=t),title:"版本对比",width:"80%"},{default:a(()=>[n("div",wt,[l(ce,{type:"border-card"},{default:a(()=>[l(P,{label:"变更概览"},{default:a(()=>[n("div",bt,[l(pe,null,{default:a(()=>[(s(!0),_(k,null,C(W.value,(t,c)=>(s(),m(ue,{key:c,type:t.type,color:g(Ne)(t.type)},{default:a(()=>[n("h4",null,i(t.title),1),n("p",null,i(t.description),1)]),_:2},1032,["type","color"]))),128))]),_:1})])]),_:1}),l(P,{label:"详细对比"},{default:a(()=>[n("div",kt,[(s(!0),_(k,null,C(ne.value,(t,c)=>(s(),_("div",{key:c,class:G(["diff-item",t.type])},[n("div",Ct,i(t.section),1),n("div",Vt,[n("div",Tt,[e[33]||(e[33]=n("h4",null,"原版本",-1)),n("p",null,i(t.oldContent),1)]),n("div",Ut,[e[34]||(e[34]=n("h4",null,"新版本",-1)),n("p",null,i(t.newContent),1)])])],2))),128))])]),_:1})]),_:1})])]),_:1},8,["modelValue"]),l(M,{modelValue:J.value,"onUpdate:modelValue":e[9]||(e[9]=t=>J.value=t),title:"审核意见",width:"40%"},{default:a(()=>[n("div",xt,[(s(!0),_(k,null,C(Q.value,t=>(s(),_("div",{key:t.id,class:"comment-item"},[n("div",Dt,[n("span",St,i(t.reviewer),1),n("span",Mt,i(t.time),1)]),n("div",zt,i(t.content),1)]))),128))])]),_:1},8,["modelValue"]),l(M,{modelValue:B.value,"onUpdate:modelValue":e[14]||(e[14]=t=>B.value=t),title:"新建协议",width:"45%"},{footer:a(()=>[n("span",Qt,[l(v,{onClick:e[13]||(e[13]=t=>B.value=!1)},{default:a(()=>e[37]||(e[37]=[d("取消")])),_:1}),l(v,{type:"primary",onClick:Pe},{default:a(()=>e[38]||(e[38]=[d(" 确认创建 ")])),_:1})])]),default:a(()=>[l(Z,{model:U,"label-width":"100px"},{default:a(()=>[l(T,{label:"协议名称",required:""},{default:a(()=>[l($,{modelValue:U.name,"onUpdate:modelValue":e[10]||(e[10]=t=>U.name=t),placeholder:"请输入协议名称"},null,8,["modelValue"])]),_:1}),l(T,{label:"协议模板",required:""},{default:a(()=>[n("div",At,[l($,{modelValue:X.value,"onUpdate:modelValue":e[11]||(e[11]=t=>X.value=t),placeholder:"点击选择协议模板",readonly:"",onClick:je},{suffix:a(()=>[l(z,null,{default:a(()=>[l(g(he))]),_:1})]),_:1},8,["modelValue"])])]),_:1}),p.value?(s(),m(T,{key:0,label:"模板详情"},{default:a(()=>[n("div",Lt,[n("div",$t,[n("div",Bt,[n("span",Ft,"版本："+i(p.value.version),1),n("span",Rt,"更新时间："+i(p.value.updateTime),1),p.value.hasUpdate?(s(),m(H,{key:0,size:"small",type:"warning"},{default:a(()=>e[35]||(e[35]=[d("有新版本")])),_:1})):V("",!0)]),n("div",Nt,i(p.value.description),1)]),n("div",Pt,[n("div",jt,[n("div",Et,[(s(!0),_(k,null,C(p.value.sections,(t,c)=>(s(),_("div",{key:c,class:"section-block"},[n("div",qt,[n("span",null,i(t.title),1),t.notes?(s(),m(re,{key:0,content:t.notes,placement:"top"},{default:a(()=>[l(z,{class:"note-icon"},{default:a(()=>[l(g(K))]),_:1})]),_:2},1032,["content"])):V("",!0)]),n("div",{class:"section-text",innerHTML:t.content},null,8,It)]))),128))])]),n("div",Ht,[n("div",Yt,[l(z,null,{default:a(()=>[l(g(lt))]),_:1}),e[36]||(e[36]=n("span",null,"重点条款",-1))]),n("div",Ot,[n("div",Kt,[(s(!0),_(k,null,C(p.value.highlights,(t,c)=>(s(),_("div",{key:c,class:G(["highlight-block",t.type])},[n("div",Gt,[l(z,null,{default:a(()=>[t.type==="warning"?(s(),m(g(ge),{key:0})):V("",!0),t.type==="success"?(s(),m(g(ye),{key:1})):(s(),m(g(K),{key:2}))]),_:2},1024),n("span",null,i(t.title),1)]),n("div",Jt,i(t.content),1)],2))),128))])])])])])]),_:1})):V("",!0),l(T,{label:"附加内容"},{default:a(()=>[l($,{modelValue:U.additionalContent,"onUpdate:modelValue":e[12]||(e[12]=t=>U.additionalContent=t),type:"textarea",rows:4,placeholder:"请输入协议附加内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(M,{modelValue:F.value,"onUpdate:modelValue":e[17]||(e[17]=t=>F.value=t),title:"选择协议模板",width:"60%"},{footer:a(()=>[n("span",ol,[l(v,{onClick:e[16]||(e[16]=t=>F.value=!1)},{default:a(()=>e[40]||(e[40]=[d("取消")])),_:1}),l(v,{type:"primary",onClick:qe},{default:a(()=>e[41]||(e[41]=[d(" 确定 ")])),_:1})])]),default:a(()=>[n("div",Wt,[l($,{modelValue:R.value,"onUpdate:modelValue":e[15]||(e[15]=t=>R.value=t),placeholder:"搜索模板",class:"template-search"},{prefix:a(()=>[l(z,null,{default:a(()=>[l(g(he))]),_:1})]),_:1},8,["modelValue"]),n("div",Xt,[(s(!0),_(k,null,C(be.value,t=>{var c;return s(),_("div",{key:t.id,class:G(["template-item",{"is-selected":t.id===((c=A.value)==null?void 0:c.id)}]),onClick:Y=>Ee(t)},[n("div",el,[n("div",tl,[n("span",ll,i(t.name),1),l(H,{size:"small",type:t.hasUpdate?"warning":"info",class:"version-tag"},{default:a(()=>[d(i(t.version),1)]),_:2},1032,["type"])]),l(v,{type:"primary",link:"",onClick:fe(Y=>Ie(t),["stop"])},{default:a(()=>e[39]||(e[39]=[d(" 查看详情 ")])),_:2},1032,["onClick"])]),n("div",al,i(t.description),1),n("div",nl,[n("span",null,"更新时间："+i(t.updateTime),1)])],10,Zt)}),128))])])]),_:1},8,["modelValue"]),l(M,{modelValue:N.value,"onUpdate:modelValue":e[20]||(e[20]=t=>N.value=t),title:"提交审核",width:"40%"},{footer:a(()=>[n("span",sl,[l(v,{onClick:e[19]||(e[19]=t=>N.value=!1)},{default:a(()=>e[42]||(e[42]=[d("取消")])),_:1}),l(v,{type:"primary",onClick:Le},{default:a(()=>e[43]||(e[43]=[d(" 确认提交 ")])),_:1})])]),default:a(()=>[l(Z,{model:L,"label-width":"80px"},{default:a(()=>[l(T,{label:"审核意见",required:""},{default:a(()=>[l($,{modelValue:L.comment,"onUpdate:modelValue":e[18]||(e[18]=t=>L.comment=t),type:"textarea",rows:4,placeholder:"请填写审核意见..."},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},ul=Je(il,[["__scopeId","data-v-966b50f8"]]);export{ul as default};
